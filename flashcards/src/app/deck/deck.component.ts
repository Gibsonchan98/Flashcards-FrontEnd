import { Component, OnInit} from '@angular/core';
import { FlashcardapiService } from '../flashcardapi.service';
import { Flashcard } from '../interfaces/Flashcard';
import { Router, ActivatedRoute} from '@angular/router';

@Component({
  selector: 'app-deck',
  templateUrl: './deck.component.html',
  styleUrls: ['./deck.component.css']
})
export class DeckComponent implements OnInit{
  
  deckCategory:any;
  numOfCards : any;
  deck : Array<Flashcard> = [];
  addCard = false;
  pencil = "..\..\assets\images\vectores\pencil.svg";
  trashcan = "..\..\assets\images\vectores\trashcan.svg"; 
  icons = [
    { 
      icon: '..\..\assets\images\vectores\pencil.svg',
      description: 'Pencil icon',
      svg: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="500" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="500" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="c63f3b2d2e"><path d="M 113 141 L 235 141 L 235 262.5 L 113 262.5 Z M 113 141 " clip-rule="nonzero"/></clipPath></defs><path fill="#000000" d="M 242.742188 176.828125 L 256.140625 163.429688 C 256.574219 162.996094 256.988281 162.542969 257.378906 162.066406 C 257.769531 161.589844 258.136719 161.097656 258.476562 160.585938 C 258.820312 160.074219 259.136719 159.546875 259.425781 159.003906 C 259.714844 158.460938 259.976562 157.90625 260.214844 157.339844 C 260.449219 156.769531 260.65625 156.191406 260.835938 155.601562 C 261.011719 155.015625 261.164062 154.417969 261.28125 153.816406 C 261.402344 153.210938 261.492188 152.605469 261.554688 151.992188 C 261.613281 151.378906 261.644531 150.765625 261.644531 150.152344 C 261.644531 149.535156 261.613281 148.921875 261.554688 148.308594 C 261.492188 147.699219 261.402344 147.089844 261.28125 146.488281 C 261.164062 145.882812 261.011719 145.289062 260.835938 144.699219 C 260.65625 144.109375 260.449219 143.53125 260.214844 142.964844 C 259.976562 142.394531 259.714844 141.839844 259.425781 141.296875 C 259.136719 140.753906 258.820312 140.226562 258.476562 139.714844 C 258.136719 139.203125 257.769531 138.710938 257.378906 138.234375 C 256.988281 137.761719 256.574219 137.304688 256.140625 136.871094 L 239.03125 119.789062 C 238.589844 119.367188 238.128906 118.96875 237.648438 118.589844 C 237.167969 118.210938 236.671875 117.855469 236.15625 117.527344 C 235.640625 117.195312 235.113281 116.890625 234.570312 116.609375 C 234.027344 116.328125 233.472656 116.074219 232.90625 115.847656 C 232.335938 115.621094 231.761719 115.421875 231.175781 115.25 C 230.589844 115.074219 229.996094 114.933594 229.394531 114.816406 C 228.792969 114.699219 228.191406 114.613281 227.582031 114.554688 C 226.972656 114.496094 226.363281 114.46875 225.753906 114.46875 C 225.140625 114.46875 224.53125 114.496094 223.921875 114.554688 C 223.316406 114.613281 222.710938 114.699219 222.109375 114.816406 C 221.511719 114.933594 220.917969 115.074219 220.332031 115.25 C 219.746094 115.421875 219.167969 115.621094 218.601562 115.847656 C 218.035156 116.074219 217.476562 116.328125 216.933594 116.609375 C 216.390625 116.890625 215.863281 117.195312 215.351562 117.527344 C 214.835938 117.855469 214.339844 118.210938 213.859375 118.589844 C 213.378906 118.96875 212.917969 119.367188 212.476562 119.789062 L 199.070312 133.191406 Z M 242.742188 176.828125 " fill-opacity="1" fill-rule="nonzero"/><g clip-path="url(#c63f3b2d2e)"><path fill="#000000" d="M 191.035156 141.257812 L 115.027344 217.265625 C 114.492188 217.800781 114.078125 218.417969 113.789062 219.117188 C 113.5 219.816406 113.355469 220.542969 113.355469 221.296875 L 113.355469 256.875 C 113.355469 257.25 113.390625 257.621094 113.464844 257.988281 C 113.539062 258.355469 113.644531 258.714844 113.789062 259.058594 C 113.933594 259.40625 114.109375 259.734375 114.316406 260.046875 C 114.523438 260.355469 114.761719 260.644531 115.027344 260.910156 C 115.289062 261.175781 115.578125 261.410156 115.890625 261.617188 C 116.203125 261.828125 116.53125 262.003906 116.875 262.144531 C 117.222656 262.289062 117.578125 262.398438 117.945312 262.46875 C 118.3125 262.542969 118.683594 262.578125 119.058594 262.578125 L 154.632812 262.578125 C 155.386719 262.578125 156.113281 262.433594 156.8125 262.144531 C 157.511719 261.855469 158.128906 261.445312 158.664062 260.910156 L 234.679688 184.894531 Z M 191.035156 141.257812 " fill-opacity="1" fill-rule="nonzero"/></g></svg>`,  
    },
    {
      icon: '..\..\assets\images\vectores\trashcan.svg',
      description: 'Trashcan icon',
      svg: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="500" zoomAndPan="magnify" viewBox="0 0 375 374.999991" height="500" preserveAspectRatio="xMidYMid meet" version="1.0"><defs><clipPath id="669edebc65"><path d="M 121.875 118.25 L 253.125 118.25 L 253.125 156 L 121.875 156 Z M 121.875 118.25 " clip-rule="nonzero"/></clipPath><clipPath id="0d2d16b877"><path d="M 131 165 L 244 165 L 244 268.25 L 131 268.25 Z M 131 165 " clip-rule="nonzero"/></clipPath></defs><g clip-path="url(#669edebc65)"><path fill="#000000" d="M 248.4375 136.648438 L 215.625 136.648438 L 215.625 122.9375 C 215.625 120.359375 213.515625 118.25 210.9375 118.25 L 164.0625 118.25 C 161.484375 118.25 159.375 120.359375 159.375 122.9375 L 159.375 136.648438 L 126.5625 136.648438 C 123.984375 136.648438 121.875 138.757812 121.875 141.335938 L 121.875 150.710938 C 121.875 153.289062 123.984375 155.398438 126.5625 155.398438 L 248.4375 155.398438 C 251.015625 155.398438 253.125 153.289062 253.125 150.710938 L 253.125 141.335938 C 253.125 138.757812 251.015625 136.648438 248.4375 136.648438 Z M 248.4375 136.648438 " fill-opacity="1" fill-rule="nonzero"/></g><g clip-path="url(#0d2d16b877)"><path fill="#000000" d="M 142.5 264.148438 C 142.734375 266.492188 144.726562 268.25 147.1875 268.25 L 227.929688 268.25 C 230.273438 268.25 232.265625 266.492188 232.617188 264.148438 L 243.867188 165.242188 L 131.25 165.242188 Z M 206.25 248.914062 L 214.453125 183.40625 C 214.804688 180.828125 217.148438 179.070312 219.726562 179.304688 C 222.304688 179.65625 224.0625 182 223.828125 184.578125 L 215.625 250.085938 C 215.273438 252.429688 213.28125 254.1875 210.9375 254.1875 C 210.703125 254.1875 210.585938 254.1875 210.351562 254.1875 C 207.773438 253.835938 206.015625 251.492188 206.25 248.914062 Z M 182.8125 183.992188 C 182.8125 181.414062 184.921875 179.304688 187.5 179.304688 C 190.078125 179.304688 192.1875 181.414062 192.1875 183.992188 L 192.1875 249.5 C 192.1875 252.078125 190.078125 254.1875 187.5 254.1875 C 184.921875 254.1875 182.8125 252.078125 182.8125 249.5 Z M 155.273438 179.304688 C 157.851562 178.953125 160.195312 180.828125 160.546875 183.40625 L 168.75 248.914062 C 169.101562 251.492188 167.226562 253.835938 164.648438 254.1875 C 164.414062 254.1875 164.296875 254.1875 164.0625 254.1875 C 161.71875 254.1875 159.726562 252.429688 159.375 250.085938 L 151.171875 184.578125 C 150.9375 182 152.695312 179.65625 155.273438 179.304688 Z M 155.273438 179.304688 " fill-opacity="1" fill-rule="nonzero"/></g></svg>`,
    },
  ];

  constructor(private router : Router, private activatedRoute: ActivatedRoute, private service :FlashcardapiService){}

  ngOnInit(): void {
    this.activatedRoute.params.subscribe(params => {
      this.deckCategory = params['category'];
      this.getCards(this.deckCategory);
    })
  }
  
  getCards(category: any){
    this.service.getAllCards().subscribe(data => {
      if(data != null){
        for(let i = 0; i < data.length; i++){
          if(category == data[i].category){
            let card = {} as Flashcard;
            card = data[i];
            console.log(card);
            this.deck.push(data[i]);
          }
        }
        this.numOfCards = this.deck.length;
      }
    })
  }

  goBackToLibrary(){
    this.router.navigateByUrl('Library');
  }

  deleteCard(id : any){
    console.log("delete " + id);
  }

  editCard(id : any, question : any, answer : any, correct : any){
    console.log("delete " + id);
  }

  addNewCard(){
    this.addCard = true;
    console.log(this.addCard);
  }
  

}
